# 使用LLM根据基于问题的数据（XX_UI_Q.txt）进行编码，设计相应的提示语。

# 熟悉数据：加载数据，提示词1

你是一位专业的定性研究员，请熟悉以下提供的游戏《我的世界》玩家访谈记录。这是一次一对一的访谈，记录中应只有两位发言者（访谈员和被访者），共28位被访者。目前仅给列一个访谈题目的数据。访谈记录格式为：

“”“
问题：【{访谈问题}】

被访者 {ID} 说：
{被访者回复}

// ... 下一个被访者ID及回复
”“”
请根据访谈记录，为被访者提供一个最多2句话的摘要。

——————



# 开放编码：提示词2

我希望你为上面的访谈记录进行定性编码。请以表格形式展示结果。
第一列是“编码名称”(Code Name)，每个编码名称应少于4个词。
第二列是“编码定义”(Code Definition)，每个定义应少于15个词。
第三列是该编码下识别出的“引文总数”(Total number of excerpts)。
第四列是“引文详情”(Excerpts)，展示该编码下的所有引文原文，不要缩短，保留原始引文。每个引文前标记出被访者ID。
请不要对访谈员提出的问题进行编码。你应该对被访者的回答进行编码，编码对象可以是句子或句子的一部分。
每个编码至少应包含5个以上的引文，少于5个的引文考虑与其他意义相同的编码合并。
对于每次访谈，你应该识别出至少1个编码。

# 导出编码：提示词3（改提示语用于未来整合代码本）

请将【{访谈问题}】的分析结果，严格按照以下JSON结构组织起来。整个输出应该是一个JSON列表，列表中的每个对象代表一个问题的分析结果：

[ // 最外层是一个列表，包含所有问题的分析结果
  {
    "question_text": "这里是第一个问题的完整文本",
    "codes_and_quotes": [
      {
        "code_name": "编码1",
        "code_definition": "编码1的定义",
        "excerpts": [ // 引文列表
          {"respondent_id": "用户ID", "quote": "引文1"},
          {"respondent_id": "另一个用户ID", "quote": "引文2"},
          // ... 更多引文，每个引文都带有 respondent_id
        ]
      },
      {
        "code_name": "编码2",
        "code_definition": "编码2的定义",
        "excerpts": [
          {"respondent_id": "用户ID", "quote": "引文1"},
          // ... 更多引文
        ]
      }
      // ... 该问题下的其他编码和引文
    ]
  },
  { // 下一个问题的分析结果
    "question_text": "另一个问题...",
    "codes_and_quotes": [ /* ... */ ]
  }
]
请将完整JSON内容分2段输出。每段请用“【第1段】”、“【第2段】”等标记开头。每次只输出JSON正文内容的一部分，直到全部输出完毕，不要省略，不要解释。

# 提炼主题：提示词4

我现在希望你作为主题分析的一部分来搜索主题。根据你上一个步骤识别的编码名称和编码定义。你应该根据共同性或总体概念来判断哪些编码可以合并在一起。
请以表格形式展示结果。
第一列是“主题名称”(Name of the theme)。
第二列是所有归入该主题的“编码列表”(All codes that fit into the theme)。
第三列是该主题的“简要总结”(Brief summary of the theme)。


# 生成开放编码JSON: 提示词5

请将【{访谈问题}】的分析结果，严格按照以下JSON结构组织起来。整个输出应该是一个JSON列表，列表中的每个对象代表一个问题的分析结果：

[
  { // 第一个问题的分析结果
    "question_text": "这里是第一个问题的完整文本",
    "initial_codes": [ // 该问题下的所有初始编码
      {
        "respondent_id": "被访者ID",
        "original_answer_segment": "被访者对该问题的完整回答",
        "code_name": [
            "初始编码1的名称1",
            "初始编码1的名称2",
            //更多编码名称
        ],
        "supporting_quote": [
            "支持初始编码1的引文",
            "支持初始编码2的引文",
            //更多引文
        ],
        "pairs": [
          "1-1", "2-2"
          // ..由连接符相连的两个数字表示编码与引文之间的对应关系。
          // 连接符前面的数字表示code_name中的第几个编码，连接符后面的数据表示supporting_quote中第几个引文
          // 如果编码与引文数量不对应，要以编码数量优先。例如：
          // "code_name": [ "生存挑战", "合作与社交"]
          // "supporting_quote": [ "生存模式吧，以前觉得和朋友一起打怪的时候很刺激。"]
          // 那么 "pairs": [ "1-1", "2-1"]
        ]
      },
      {
        "respondent_id": "被访者ID",
        "original_answer_segment": "被访者对该问题的完整回答",
        "code_name": [
            "初始编码1的名称1",
            "初始编码1的名称2",
            //更多编码名称
        ],
        "supporting_quote": [
            "支持初始编码1的引文",
            "支持初始编码2的引文",
            //更多引文
        ],
        "pairs": [
          "1-1", "2-2"
          // ..由连接符相连的两个数字表示编码与引文之间的对应关系。
          // 连接符前面的数字表示code_name中的第几个编码，连接符后面的数据表示supporting_quote中第几个引文
          // 如果编码与引文数量不对应，要以编码数量优先。例如：
          // "code_name": [ "自由创造", "资源获取", "成就感"]
          // "supporting_quote": [ "能自己创造，然后就在生存模式里能自己获取资源啥的","有一个地方能发挥我的创造力，有成就感"]
          // 那么 "pairs": [ "1-2", "2-1", "3-2"] <--这个对应关系要能够真实反映编码与引文意义上的一致性。
        ]
      },
      // ... 更多该被访者回答的其他初始编码
      // ... 更多其他被访者对该问题的初始编码
    ],
    "codes": [ // 编码汇总
        {
          "code_name": "识别出的第一个初始编码",
          "code_definition": "编码定义",
        },
        {
          "code_name": "识别出的第二个初始编码",
          "code_definition": "编码定义",
        },
        // ... 更多初始编码
    ],
    "themes": [ // 从上述初始编码中提炼出的主题编码
      {
        "theme_name": "主题编码A的名称",
        "theme_definition": "对主题编码A的简要定义",
        "included_initial_codes": ["初始编码1的名称", "初始编码X的名称", ...] // 构成此主题的初始编码名称列表
      },
      {
        "theme_name": "主题编码B的名称",
        "theme_definition": "对主题编码B的简要定义",
        "included_initial_codes": ["初始编码2的名称", "初始编码Y的名称", ...]
      }
      // ... 更多为该问题提炼的主题编码
    ]
  },
  { // 第二个问题的分析结果
    "question_text": "这里是第二个问题的完整文本",
    "initial_codes": [ /* ... */ ],
    "themes": [ /* ... */ ]
  }
  // ... 批次内其他问题的分析结果
]

请将完整JSON内容分4段输出。每段请用“【第1段】”、“【第2段】”等标记开头。每次只输出JSON正文内容的一部分，直到全部输出完毕，不要省略，不要解释。


# 构建代码本

你是一位经验丰富的定性研究员，**最终目标是为【[在此处填入具体的主题组名称，例如：游戏《我的世界》中玩家在“创造性感受”方面的体验]】这个宏观主题，构建一个高质量的、包含系统性、逻辑性和实用性的编码本。该编码本将用于后续对访谈文本的系统性演绎式编码。**

我现在提供给你的是关于上述宏观主题的初步编码列表（raw codes）。每个初步编码条目包含其原始名称、初步定义、它主要源自哪个访谈问题，以及一些支持该编码的原始访谈引文。

你的核心任务是：
1.  **仔细阅读并深刻理解**以下提供的所有初步编码条目。
2.  **识别语义上相似或重叠的编码：** 重点关注那些尽管原始措辞可能不同，但实质上指向相同核心概念或现象的编码。
3.  **（可选深化步骤）请主动思考并尝试关联**【[如果适用，在此处填入指定的理论/概念，例如：在分析“创造性感受”时，可思考“心流理论的构成要素”、“自我决定理论中的内在动机”等]】相关的理论模型或核心概念。如果你的分析和最终编码定义借鉴了特定理论或模型，请在后续输出中明确注明。
4.  **合并与提炼编码：**
    * 将你认为可以（并且应该）基于语义一致性进行合并的初步编码进行合并。
    * **请注意：** 一个在原始数据中被标记的初步编码（raw code），由于其内涵的丰富性，可能在本主题组的特定语境下，其部分意义与其他的初步编码重叠。即使该初步编码也可能在其他主题组的分析中被合并到别的最终编码里（这不由你当前任务决定），在这里，请专注于它在**本主题组内**的意义和关联性进行合并判断。
    * 为每一个最终确立的编码，给出一个**简洁（建议4个词以内）、精准且具有概括性的新编码名称**。
    * 为每一个最终确立的编码，撰写一个**清晰、准确、具有操作性的定义**（建议20-30词左右）。定义应明确指出该编码用于标识什么样的文本内容或现象，**最好能包含典型的“包含标准”（什么样的情况适用此编码）和（如果适用的话）“排除标准”（什么样的情况不适用此编码，或应与哪些相似编码进行区分）。**
    * 如果在定义或提炼编码时参考了步骤3中提到的理论，请在输出时给出理论/模型的名字、相关的核心元素，以及（如果可能的话）参考文献的关键信息（如作者、年份）。
5.  **主题分析：** 对合并后的新生成的编码进行主题分析。根据编码名称和编码定义。你应该根据共同性或总体概念来判断哪些编码可以合并在一起，生成主题名。每个编码只能隶属1个主题。全部主题数量在8个以内。
6.  **追溯原始编码：** 对于每一个最终确立的编码，请明确标注出它是由哪些原始编码合并而来的，或者是基于哪个原始编码改编的。
7.  **选择代表性引文：** 对于每个最终确立的编码，如果可能，请从该编码所包含的原始引文示例中，挑选1-2句**最能**体现该编码核心含义、最具代表性的引文。如果原始引文都过长或不完全贴切，你可以不提供，或者尝试进行高度忠于原文的简要转述（但请务必注明是“转述”）。
8.  **确保编码本的整体质量：**
    * **互斥性（清晰区分）：** 最终编码本中的各个编码及其定义应尽可能清晰地区分，避免含义上的显著重叠或模糊不清。
    * **覆盖性（全面反映）：** 最终的编码集合应力求能全面反映所提供的初步编码列表（raw codes）中蕴含的**核心概念和多样性视角**。如果有重要的初步编码概念未能被任何最终编码所包含，请思考是否需要增补新的编码或调整现有编码的定义以更具包容性。
    * **适当的抽象层次：** 编码的粒度应适中，既能捕捉具体现象，又能体现一定的概括性，避免过于琐碎或过于宽泛。

请将你最终生成的编码本（针对【[再次填入主题组名称]】）严格按照以下格式输出。每个编码条目之间用"----"（四个短横线）分隔：

编码名称：[你提炼的编码名称1]
编码定义：[你为编码1撰写的、包含适用和排除标准的定义]
代表性引文：
  示例1: [引文示例1 (ID: X)]
  示例2: [引文示例2 (ID: Y)]
来源编码（参考）：[构成此最终编码的原始编码名称列表，用逗号分隔]
来源问题（参考）：[综合判断，该最终编码主要源自哪些原始访谈问题，用逗号分隔，可选]
隶属主题：[所隶属的主题名]
理论参考（可选）：[理论/模型名称；相关元素；参考文献信息（如作者, 论文名，年份）]
----
编码名称：[你提炼的编码名称2]
编码定义：[你为编码2撰写的定义]
代表性引文：
  示例1: [引文示例1 (ID: Z)]
来源编码（参考）：[...]
来源问题（参考）：[...]
隶属主题：[...]
理论参考（可选）：[...]
----
(依此类推，直到处理完所有初步编码并形成最终编码本)

现在，请处理以下关于【[再次填入主题组名称]】的初步编码材料：

“”“
// 在这里粘贴 build_codebook_raw.py 为该主题组生成的TXT文件的全部内容
“”“
